{
package cmd 

import (
    "github.com/vatriathlon/stopwatch"
    log "github.com/sirupsen/logrus"
)

// *****************************************************************************************
// This file is generated after its sibling `root-grammar.peg` file. DO NOT MODIFY !
// *****************************************************************************************

}

// ------------------------------------------
// (any) command
// ------------------------------------------
RootCommand <- help / exit / races / race / teams / lap

// ------------------------------------------
// help command
// ------------------------------------------
help "display the commands" <- "help"i WS*  EOF {
    return NewHelpCmd()
}

// ------------------------------------------
// exit program command
// ------------------------------------------
exit "exit the program" <- "exit"i WS*  EOF { // exit the program
    return NewExitCmd()
}

// ------------------------------------------
// list races command
// ------------------------------------------
races "list the races" <- "races"i WS* EOF {
    return NewListRacesCmd()
}

// ------------------------------------------
// race use-a-race command
// ------------------------------------------
race "race a the race" <- "race"i WS+ raceName:(raceName) WS* EOF {
    return NewUseRaceCmd(raceName.(string))
}

raceName <- (!EOF .)* {
    return string(c.text), nil
}

// ------------------------------------------
// start race command
// ------------------------------------------
start "start the stopwatch for the race in race" <- "start"i WS* EOF {
    return NewStartRaceCmd()
}

// ------------------------------------------
// stop race command
// ------------------------------------------
stop "stop the stopwatch for the race in race" <- "stop"i WS* EOF {
    return NewStopRaceCmd()
}

// ------------------------------------------
// list teams command
// ------------------------------------------
teams "list the teams" <- "teams"i WS* EOF { 
    return NewListTeamsCmd()
}

// ------------------------------------------
// add lap to team(s)
// ------------------------------------------
lap "add lap" <- bib:([0-9]+ { 
        return string(c.text), nil
    }) WS* EOF { 
    return NewAddLapCmd(bib.(string))
}


// ------------------------------------------
// base rules
// ------------------------------------------

WS <- " " / "\t"

EOF <- !.